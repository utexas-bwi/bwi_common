<launch>
  <arg name="use_sim_time" default="true" />
  <arg name="gui" default="true" />
  <arg name="world" default="L-shape-1.6m" />
  <arg name="multimap_file" default="$(find train_world)/maps/combined.yaml" />

  <!-- start the simulation environment -->
  <param name="/use_sim_time" value="$(arg use_sim_time)" />
  <node name="gazebo" pkg="gazebo_ros" type="gzserver" args="$(find train_world)/worlds/$(arg world).world" respawn="false" output="screen" launch-prefix="$(optenv OPTIRUN_LAUNCH_PREFIX)" />
  <group if="$(arg gui)">
    <node name="gazebo_gui" pkg="gazebo_ros" type="gzclient" respawn="false" output="screen" launch-prefix="$(optenv OPTIRUN_LAUNCH_PREFIX)" />
  </group>

  <!-- launch the multi map server for the simulated world -->
  <node name="multi_level_map_server" pkg="multi_level_map_server" type="multi_level_map_server">
    <param name="map_file" value="$(arg multimap_file)" />
  </node>
</launch>